var boozurkScripts;(function(a){boozurkScripts={init:function(b){var c=b.split(",");for(i in c){switch(c[i]){case"postexpander":boozurkScripts.post_expander();break;case"thickbox":boozurkScripts.init_thickbox();break;case"tooltips":boozurkScripts.tooltips();boozurkScripts.cooltips(".pmb_comm,.minibutton,.share-item img,.tb_categories a,#bz-quotethis,.tb_latest_commentators li,.tb_social a,.post-format-item.compact img,a.bz-tipped-anchor");break;case"plusone":gapi.plusone.go("posts_content");break;case"quotethis":boozurkScripts.init_quote_this();break;case"infinitescroll":boozurkScripts.infinite_scroll(boozurk_l10n.infinite_scroll_type);break;case"animatemenu":boozurkScripts.animate_menu();break;case"scrolltopbottom":boozurkScripts.scroll_top_bottom();break;case"commentvariants":boozurkScripts.comment_variants();break;case"resizevideo":boozurkScripts.resize_video();break;case"tinynav":boozurkScripts.tinynav();break;default:break}}},post_expander:function(){return a("#posts_content").find("a.more-link").each(function(){a(this).click(function(){var b=a(this);a.ajax({type:"POST",url:b.attr("href"),beforeSend:function(c){b.html(boozurk_l10n.post_expander).addClass("ajaxed")},data:"boozurk_post_expander=1",success:function(c){b.parents(".storycontent").hide().html(a(c)).fadeIn(600)}});return false})})},infinite_scroll:function(b){a("#bz-page-nav").addClass("ajaxed");a("#bz-next-posts-button").fadeOut();a(".nb-nextprev").hide();return a(window).scroll(function(){if(a("#bz-page-nav").position().top-a(window).scrollTop()-a(window).height()<-150){var c=a("#bz-next-posts-link a");if(c.length>0){if(b=="auto"){boozurkScripts.AJAX_paged()}else{if(b=="manual"){a("#bz-next-posts-button").fadeIn()}}}else{a("#bz-next-posts-button").html(boozurk_l10n.infinite_scroll_end).fadeIn();return false}}})},animate_menu:function(){return a("#mainmenu").children(".menu-item-parent").each(function(){$this=a(this);var b=$this.children("ul");b.css({opacity:0});$this.mouseenter(function(){b.css({display:"block"}).animate({opacity:0.95})}).mouseleave(function(){b.stop().animate({opacity:0},200,"swing",function(){b.css({display:""})})})})},tooltips:function(){return a("#posts_content").find(".bz-tooltip").each(function(){var d=a(this).parent();var b=a(this);var c;d.mouseenter(function(){window.clearTimeout(c);b.stop().css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:0.9})}).mouseleave(function(){c=window.setTimeout(function(){b.fadeOut()},200)})})},cooltips:function(b){var c=a('<div class="cooltip"></div>');c.appendTo(document.body);var d;return a(b).each(function(){var e=a(this);e.mouseenter(function(){var h,g,f;if(e.attr("title")||typeof(e.attr("original-title"))!="string"){e.attr("original-title",e.attr("title")||"").removeAttr("title")}c.html(e.attr("original-title"));h=e.offset();c.css({top:0,left:0,display:"block"}).removeClass("to_left to_right");if(h.left>(a(window).width()-250)){g=h.left-c.outerWidth()+(e.outerWidth()/2);f="to_left"}else{g=h.left+(e.outerWidth()/2);f="to_right"}c.css({top:h.top-c.outerHeight()-10,left:g}).addClass(f);window.clearTimeout(d);c.stop().css({opacity:0}).animate({opacity:0.9})}).mouseleave(function(){d=window.setTimeout(function(){c.fadeOut()},200)})})},AJAX_paged:function(){var b=a("#bz-next-posts-link a").attr("href");var c=a("#bz-page-nav");a.ajax({type:"POST",url:b,beforeSend:function(d){a("#bz-page-nav-msg").addClass("loading").html(boozurk_l10n.infinite_scroll).animate({opacity:1})},data:"boozurk_infinite_scroll=1",success:function(d){c.replaceWith(a(d));boozurkScripts.init(boozurk_l10n.script_modules_afterajax);a("#bz-next-posts-button input").click(function(){boozurkScripts.AJAX_paged()})}});return false},init_thickbox:function(){a("#posts_content").find(".storycontent a img").parent('a[href$=".jpg"],a[href$=".png"],a[href$=".gif"]').addClass("thickbox");a("#posts_content").find(".storycontent .gallery").each(function(){a('a[href$=".jpg"],a[href$=".png"],a[href$=".gif"]',a(this)).attr("rel",a(this).attr("id"))})},scroll_top_bottom:function(){top_but=a("#navbuttons").find(".minib_top");bot_but=a("#navbuttons").find(".minib_bottom");top_but.click(function(){a("html, body").animate({scrollTop:0},{duration:400});return false});bot_but.click(function(){a("html, body").animate({scrollTop:a("#footer").offset().top-80},{duration:400});return false})},comment_variants:function(){a("#commentform").find(".comment-variants label").click(function(){a("#comment").removeClass("style-default style-blue style-pink style-orange style-yellow style-green style-gray style-white");a("#comment").addClass(a("input",this).val());a("input",this).attr("checked",true)})},init_quote_this:function(){if(document.getElementById("reply-title")&&document.getElementById("comment")){bz_qdiv=document.createElement("small");bz_qdiv.innerHTML=' - <a id="bz-quotethis" href="#" onclick="boozurkScripts.quote_this(); return false" title="'+boozurk_l10n.quote_tip+'" >'+boozurk_l10n.quote+"</a>";bz_replink=document.getElementById("reply-title");bz_replink.appendChild(bz_qdiv)}},quote_this:function(){var b="";if(window.getSelection){b=window.getSelection()}else{if(document.getSelection){b=document.getSelection()}else{if(document.selection){b=document.selection.createRange().text}else{return true}}}b=b.toString().replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;");if(b.length!==0){document.getElementById("comment").value=document.getElementById("comment").value+"<blockquote>"+b+"</blockquote>"}else{alert(boozurk_l10n.quote_alert)}},resize_video:function(){var b=a("#posts_content").find(".storycontent");var c=a("iframe[src^='http://player.vimeo.com'], iframe[src^='http://www.youtube.com'], object, embed",b);c.each(function(){a(this).attr("data-aspectRatio",this.height/this.width).removeAttr("height").removeAttr("width")});a(window).resize(function(){var d=b.width();c.each(function(){var e=a(this);e.width(d).height(d*e.attr("data-aspectRatio"))})}).resize()},tinynav:function(){a(".nav-menu").tinyNav({active:"current_page_item",label:"",header:""})}};a(document).ready(function(b){boozurkScripts.init(boozurk_l10n.script_modules)});a("body").on("post-load",function(b){boozurkScripts.init(boozurk_l10n.script_modules_afterajax)})})(jQuery);