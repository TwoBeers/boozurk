var boozurkScripts;(function(a){boozurkScripts={init:function(b){var c=b.split(",");for(i in c){switch(c[i]){case"postexpander":boozurkScripts.post_expander();break;case"thickbox":boozurkScripts.init_thickbox();break;case"tooltips":boozurkScripts.tooltips();boozurkScripts.cooltips(boozurk_l10n.cooltips_selector);break;case"quotethis":boozurkScripts.init_quote_this();break;case"animatemenu":boozurkScripts.animate_menu();break;case"scrolltopbottom":boozurkScripts.scroll_top_bottom();break;case"commentvariants":boozurkScripts.comment_variants();break;case"resizevideo":boozurkScripts.resize_video();break;case"tinynav":boozurkScripts.tinynav();break;case"tinyscrollbar":boozurkScripts.tinyscrollbar();break;default:break}}},post_expander:function(){return a("#posts_content").find("a.more-link").each(function(){a(this).unbind().click(function(){var b=a(this);a.ajax({type:"POST",url:b.attr("href"),beforeSend:function(c){b.html(boozurk_l10n.post_expander).addClass("ajaxed")},data:"boozurk_post_expander=1",success:function(c){b.parents(".storycontent").hide().html(a(c)).fadeIn(600)}});return false})})},animate_menu:function(){return a("#mainmenu").children(".menu-item-parent").each(function(){$this=a(this);var b=$this.children("ul");b.css({opacity:0});$this.hoverIntent(function(){b.css({display:"block"}).animate({opacity:0.95})},function(){b.stop().animate({opacity:0},200,"swing",function(){b.css({display:""})})})})},tooltips:function(){return a("#posts_content").find(".bz-tooltip").each(function(){var d=a(this).parent();var b=a(this);var c;b.hide();d.unbind().hoverIntent(function(){window.clearTimeout(c);b.stop().css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:0.9})},function(){c=window.setTimeout(function(){b.fadeOut()},200)})})},cooltips:function(b){var c=a('<div class="cooltip"></div>');c.appendTo(document.body);var d;return a(b).each(function(){var e=a(this);e.unbind().hoverIntent(function(){var h,g,f;if(e.attr("title")||typeof(e.attr("original-title"))!="string"){e.attr("original-title",e.attr("title")||"").removeAttr("title")}c.html(e.attr("original-title"));h=e.offset();c.css({top:0,left:0,display:"block"}).removeClass("to_left to_right");if(h.left>(a(window).width()-250)){g=h.left-c.outerWidth()+(e.outerWidth()/2);f="to_left"}else{g=h.left+(e.outerWidth()/2);f="to_right"}c.css({top:h.top-c.outerHeight()-10,left:g}).addClass(f);window.clearTimeout(d);c.stop().css({opacity:0}).animate({opacity:0.9})},function(){d=window.setTimeout(function(){c.fadeOut()},200)})})},init_thickbox:function(){a("#posts_content").find(".storycontent a img").parent('a[href$=".jpg"],a[href$=".png"],a[href$=".gif"]').addClass("thickbox");a("#posts_content").find(".storycontent .gallery").each(function(){a('a[href$=".jpg"],a[href$=".png"],a[href$=".gif"]',a(this)).attr("rel",a(this).attr("id"))})},scroll_top_bottom:function(){top_but=a("#navbuttons").find(".minib_top a");bot_but=a("#navbuttons").find(".minib_bottom a");top_but.click(function(){a("html, body").animate({scrollTop:0},{duration:400});return false});bot_but.click(function(){a("html, body").animate({scrollTop:a("#footer").offset().top-80},{duration:400});return false})},comment_variants:function(){a("#commentform").find(".comment-variants label").click(function(){a("#comment").removeClass("style-default style-blue style-pink style-orange style-yellow style-green style-gray style-white");a("#comment").addClass(a("input",this).val());a("input",this).attr("checked",true)})},init_quote_this:function(){if(document.getElementById("reply-title")&&document.getElementById("comment")){bz_qdiv=document.createElement("small");bz_qdiv.innerHTML=' - <a id="bz-quotethis" href="#" onclick="boozurkScripts.quote_this(); return false" title="'+boozurk_l10n.quote_tip+'" >'+boozurk_l10n.quote+"</a>";bz_replink=document.getElementById("reply-title");bz_replink.appendChild(bz_qdiv)}},quote_this:function(){var b="";if(window.getSelection){b=window.getSelection()}else{if(document.getSelection){b=document.getSelection()}else{if(document.selection){b=document.selection.createRange().text}else{return true}}}b=b.toString().replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;");if(b.length!==0){document.getElementById("comment").value=document.getElementById("comment").value+"<blockquote>"+b+"</blockquote>"}else{alert(boozurk_l10n.quote_alert)}},resize_video:function(){var b=a("#posts_content").find(".storycontent");var c=a("iframe[src^='http://player.vimeo.com'], iframe[src^='http://www.youtube.com'], object, embed",b);c.each(function(){a(this).attr("data-aspectRatio",this.height/this.width).removeAttr("height").removeAttr("width")});a(window).resize(function(){var d=b.width();c.each(function(){var e=a(this);e.width(d).height(d*e.attr("data-aspectRatio"))})}).resize()},tinynav:function(){a(".nav-menu").tinyNav({label:'<i class="icon-align-justify"></i>',header:""})},tinyscrollbar:function(){var d=a("#sidebar-primary.fixed");var c=a("#sidebar-secondary.fixed");var e;function b(){if(d.length){d.tinyscrollbar_update()}if(c.length){c.tinyscrollbar_update()}}if(d.length){a(".viewport",d).prepend('<div class="scrollbar"><div class="track"><div class="thumb"><div class="end"></div></div></div></div>');d.removeClass("fixed").addClass("tinyscroll");d.tinyscrollbar();d.hover(function(){a(".scrollbar",this).fadeIn()},function(){a(".scrollbar",this).stop().fadeOut()})}if(c.length){a(".viewport",c).prepend('<div class="scrollbar"><div class="track"><div class="thumb"><div class="end"></div></div></div></div>');c.removeClass("fixed").addClass("tinyscroll");c.tinyscrollbar();c.hover(function(){a(".scrollbar",this).fadeIn()},function(){a(".scrollbar",this).stop().fadeOut()})}a(window).resize(function(){clearTimeout(e);e=setTimeout(function(){b()},100)})}};a(document).ready(function(b){boozurkScripts.init(boozurk_l10n.script_modules)});a("body").on("post-load",function(b){boozurkScripts.init(boozurk_l10n.script_modules_afterajax)})})(jQuery);